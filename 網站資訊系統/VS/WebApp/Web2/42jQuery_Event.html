<!--如何用好的方法寫事件-->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>
        body {
            overflow-x: hidden;
        }

        #container {
            width: 1000px;
            margin: auto;
        }

            #container > #TravelData > div {
                border: 2px groove #808080;
                border-radius: 10px;
                margin-top: 10px;
                padding: 15px;
            }

                #container > #TravelData > div > img {
                    width: inherit;
                    /*inherit繼承父節點*/
                }
        .center {
            text-align: center;
        }

        #container > h1 {
            position: absolute;
        }
        #switcher span{
        border:1px solid;
        cursor:pointer;
        }

        .small {
            /*不能用絕對表示法*/
            /*emVSrem，會有階層問題，使用rem通常都不會有問題*/
            font-size: 0.5rem;
        }
        .large {            
            font-size: 2rem;
        }
        .default {            
            font-size: 1rem;
        }
        /*同時套用.large.small屬性衝突後面會蓋過前面的 CLASS*/

        .selected {
            background-color: yellow;
            font-weight: 900;
        }
    </style>
</head>
<body>
    <fieldset id="login">
        <legend>登入系統</legend>
        <table>
            <tr>
                <td>
                    帳號:
                </td>
                <td>
                    <input id="Text1" type="text" />
                </td>
            </tr>
            <tr>
                <td>
                    密碼:
                </td>
                <td>
                    <input id="Password1" type="password" />
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <input id="Submit1" type="submit" value="登入" />
                    <input id="Reset1" type="reset" value="重填" />
                </td>

            </tr>
        </table>
    </fieldset>
    <div id="switcher">
        <span id="large">大</span>
        <span id="default">中</span>
        <span id="small">小</span>
    </div>
    <div id="container">
        <input type="button" id="button1" value="登入系統">
        <h1>全國農業旅遊休閒園區</h1>
        輸入程式查詢：<input type="text" id="txtCity" /><input type="button" value="查詢" onclick="filter()" />
    </div>

    <script src="Scripts/jquery-3.6.0.min.js"></script>
    <script>

    //Animate是動畫
        //hide方法是在CSS寫display:none

        //show、hide
        //$('#container>h1:first-child').hide();
        //$('#container>h1:first-child').show(3000);

        //slide滑動
        //$('#container>h1:first-child').slideDown(3000);
        //$('#container>h1:first-child').slideUp(3000);

        //事件觸發Toggle，可以關可以開
        $('#login').hide();
        $('#button1').click(function () {
            $('#login').slideToggle(3000);
        })

        
        


        //若介面是給人看的為UI，給程式碼看的為API

        //JQ把ajax做成函數

        //備註資料怎麼處理
            //1.使用新網頁顯示詳細資料
            //2.放在title


        //API filter
        //有問題:
        //1.Q：打"台"找不到"臺中"
        //2.Q：$("#container").append(item);，搜尋"南投"再搜尋"彰化"，資料會被放在南投下面

        let item = "";
        filter();

        $('#container').append("<div id='TravelData'></div>");

        function filter() {
            $.ajax({
                type: 'get',
                url: `https://data.coa.gov.tw/Service/OpenData/ODwsv/ODwsvAttractions.aspx?$filter=City+like+${$('#txtCity').val()}`,
            success: function (data) {
                //data是自己取

                $('#TravelData').empty();   //empty清空

                for (var i = 0; i < data.length; i++) {
                    //item += "<div>";
                    //item += `<h1>${data[i].Name}</h1>`;
                    //item += `<h2>${data[i].Tel}</h2>`;
                    //item += `<h2>${data[i].Address}</h2>`;
                    //item += "<img src='" + data[i].Photo + "' />";
                    //item += `<p><a href="https://www.google.com.tw/maps/search/${data[i].Address}" target="_blank">點我看地圖</a></p>`
                    //item += "</div>";
                    //item += "<hr>";


                    item = `<div title="${data[i].Introduction}">
                                <h1 class="center">${data[i].Name}</h1>
                                <div class="center"><img src="${data[i].Photo}" /></div>
                                <h2>${data[i].Tel}</h2>
                                <h2>${data[i].Address}</h2>
                                <p><a href="https://www.google.com.tw/maps/search/${data[i].Address}" target="_blank">點我看地圖</a></p>
                            </div>`;

                    $("#TravelData").append(item);
                }

            },
            error: function () {
                alert('error');
            }
        });
        }

        function setStyle1() {
            $('#container > h1:first-child').css({
                'box-shadow': '0px 0px 20px black',
                'padding': '15px;',
                'background-color': '#FFFF00',

            });
        }
      
        /*----------------*/

        //$('#large').click(function () {
        //    $('#TravelData').removeClass().addClass('large');
        //    $('#switcher>span').removeClass('selected'); /*移除全部的class*/
        //    $('#large').addClass('selected');
        //})
        //$('#small').click(function () {
        //    $('#TravelData').removeClass().addClass('small')
        //    $('#switcher>span').removeClass('selected');
        //    $('#small').addClass('selected');
        //})
        //$('#default').click(function () {
        //    $('#TravelData').removeClass().addClass('default')
        //    $('#switcher>span').removeClass('selected');
        //    $('#default').addClass('selected');
        //})
        //以上除了參數化以外，還可以用下面的寫法
        
        //***把選擇器下在父節點，再利用event.target，就不用每個按鈕都寫click
        $('#switcher').click(function (evt) {
            if (evt.target.id != 'switcher')
            {                
                $('#TravelData').removeClass().addClass(evt.target.id)
                $('#switcher>span').removeClass('selected');
                $(evt.target).addClass('selected');
            }            
        })

    </script>
</body>
</html>